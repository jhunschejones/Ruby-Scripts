#!/usr/bin/env ruby
require_relative '../lib/module_loader'

def menu
  system("clear")
  puts "\033[36m=======  Welcome to Kanji List!  =======\033[0m"
  puts "\e[37mSelect an option, press ENTER to advance\033[0m"
  puts ""
  puts "1. Show next \e[37m(#{Kanji.remaining_characters.size} remaining)\033[0m"
  puts "2. Add"
  puts "3. Skip"
  puts "4. Remove"
  puts ""
end

def parse_user_input
  user_input = $stdin.gets.chomp.downcase
  return $quit = true if ["exit", "quit", "q"].include?(user_input)
  menu()

  case user_input
  when "1"
    puts Kanji.next ? "Next kanji:\n#{Kanji.next}" : "No more new kanjis in the word list"
  when "2"
    puts "Kanji to add:"
    print "> "
    p Kanji.add($stdin.gets.strip)
  when "3"
    puts "Kanji to skip:"
    print "> "
    p Kanji.skip($stdin.gets.strip)
  when "4"
    puts "Kanji to remove:"
    print "> "
    p Kanji.remove($stdin.gets.strip)
  when "total"
    puts "\e[33mTotal kanji added: #{Kanji.count}\033[0m"
  else
    return
  end

  $stdin.gets
end

$quit = false

until $quit
  menu()
  print "> "
  parse_user_input()
end
