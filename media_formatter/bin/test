#!/usr/bin/env ruby

ENV["SCRIPT_ENV"] = "test"

require "test/unit"
require "mocha/test_unit"
require "fileutils"
require_relative "../lib/module_loader.rb"

IMAGE_WATCH_DIRECTORY = "test/fixture_files"
BACKUP_IMAGE_FILES_PATH = "test/fixture_files/backups"
AUDIO_WATCH_DIRECTORY = "test/fixture_files"

Test::Unit.at_start do
  # this setup runs once at the start
  Dir.mkdir(BACKUP_IMAGE_FILES_PATH) unless Dir.exist?(BACKUP_IMAGE_FILES_PATH)
end

Test::Unit.at_exit do
  # this setup runs once at the very end of the test
  FileUtils.rm_rf(BACKUP_IMAGE_FILES_PATH) if Dir.exist?(BACKUP_IMAGE_FILES_PATH)
end

Dir["#{Dir.pwd}/**/*.rb"].each do |file|
  require(file) if File.basename(file).include?("_test")
end
